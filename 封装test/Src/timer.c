#include "timer.h"

//*******************************************************
//! \brief       ¼ÆÊ±Æ÷
//*******************************************************

bit timer_on;
bit f_2dt;
u8  num_250us;
u8  num_1ms;
u8  num_10ms;
u8  seconds;
u8  minutes;
u8  time_to;

void Timer(void)
{
	if(f_t0)
	{
		f_t0 = 0;
		// **********************************
		// \brief   125 us
		// **********************************
		f_2dt = ~f_2dt;
		if(f_2dt)
		{
			// **********************************
			// \brief   250 us
			// **********************************
			num_250us++;
			if(num_250us == 4)
			{
				num_250us = 0;
				// **********************************
				// \brief   1 ms
				// **********************************
				num_1ms++;
				if(num_1ms == 10)
				{
					num_1ms = 0;
					// **********************************
					// \brief   10 ms
					// **********************************
					num_10ms++;
					if(num_10ms == 100)
					{
						num_10ms = 0;
						// **********************************
						// \brief   1 s
						// **********************************
						if(timer_on)
						{
							seconds ++;
							if(seconds == 60)
							{
								seconds = 0;
								minutes ++;
								if(minutes == 60)
								{
									minutes = 0;
									time_to --;
									if(time_to == 0)
									{
										timer_on = 0;
										// ...
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
