#include"user.h"

extern void Uart_Initialize(void);

void init(void)
{
    uchar		k;
/***********************************************/
/************		PWM_ABC			************/
/***********************************************/
	P1IO    = 	0xff;
	P1PU    = 	0xff;
	P2IO    = 	0xff; 	// OUT
	P2PU    = 	0xff;	// ON
	IO_A	= 	0;
	IO_B	= 	1;
	IO_C	= 	1;
/***********************************************/
/************		UART			************/
/***********************************************/
	P3IO    =	0xfd;		// in out 
    P3OD    =	0xfe;		// OD OD
	P3PU    =	0xff;		// on on
	P3FSR	=	0X01;		//[2 1 0] 0 0 1 RXD TXD
/***********************************************/
/************		TIMER0			************/
/***********************************************/
	T0CR	=	0x80;
	T0CR	|=	0x03;		//Fx/4->4us
	T0DR	=	0x27;		//4*0.95372*39=160us
    IE2     = 	0x02;		//T0 en
/***********************************************/
/************					************/
/***********************************************/
    UARTCR1 = 	0x06;                
    UARTCR2 = 	0x6E;                 
    UARTCR3 = 	0x00;                   
    UARTBD  =	12;			// BAUD_115200	fx = 3.6864 MHz
    UARTST  =	0x00;                    
    IE1		|=	0x18;		// -     -     -    (TX)  (RX)   I2C   Ex6   Ex5
	IE		|=	0x80;		//(EA)   -    ExG0  -     -     Ex12  Ex11  Ex10
	k		=	UARTDR;		// clear overrun error!
}
